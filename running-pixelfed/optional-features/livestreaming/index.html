<!doctype html><html lang=en xml:lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><link rel=stylesheet href=https://docs.pixelfed.org/scss/theme.screen.min.288f0f50a47e58ae93125e8eb2b3dcecfa41f49137862f2f254d833aea6c28fd.css integrity="sha256-KI8PUKR+WK6TEl6OsrPc7PpB9JE3hi8vJU2DOupsKP0=" media=screen><script type=text/javascript src=https://docs.pixelfed.org/js/script.min.min.6b8f2537cadb577218f145cb8286cb769511f294e34e35d2a68f9c34b03e7295.js integrity="sha256-a48lN8rbV3IY8UXLgobLdpUR8pTjTjXSpo+cNLA+cpU="></script>
<link rel="shortcut icon" href=https://docs.pixelfed.org/images/icon.png sizes=765x765><title>Livestreaming (Pixelfed Live) | Pixelfed Documentation</title><title itemprop=name>Livestreaming (Pixelfed Live) | Pixelfed Documentation</title><meta property="og:title" content="Livestreaming (Pixelfed Live) | Pixelfed Documentation"><meta name=twitter:title content="Livestreaming (Pixelfed Live) | Pixelfed Documentation"><meta itemprop=name content="Livestreaming (Pixelfed Live) | Pixelfed Documentation"><meta name=application-name content="Pixelfed Documentation"><meta property="og:site_name" content="Pixelfed Documentation"><meta name=description content="Pixelfed Live is a mobile based livestreaming feature."><meta itemprop=description content="Pixelfed Live is a mobile based livestreaming feature."><meta property="og:description" content="Pixelfed Live is a mobile based livestreaming feature."><meta name=twitter:description content="Pixelfed Live is a mobile based livestreaming feature."><base href=https://docs.pixelfed.org/running-pixelfed/optional-features/livestreaming/><link rel=canonical href=https://docs.pixelfed.org/running-pixelfed/optional-features/livestreaming/ itemprop=url><meta name=url content="https://docs.pixelfed.org/running-pixelfed/optional-features/livestreaming/"><meta name=twitter:url content="https://docs.pixelfed.org/running-pixelfed/optional-features/livestreaming/"><meta property="og:url" content="https://docs.pixelfed.org/running-pixelfed/optional-features/livestreaming/"><meta itemprop=image content="https://docs.pixelfed.org/images/icon.png"><meta property="og:image" content="https://docs.pixelfed.org/images/icon.png"><meta name=twitter:image content="https://docs.pixelfed.org/images/icon.png"><meta name=twitter:image:src content="https://docs.pixelfed.org/images/icon.png"><meta property="og:updated_time" content="2022-08-07T09:42:43-0500"><meta property="og:type" content="website"><meta name=author content><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","url":"https://docs.pixelfed.org/running-pixelfed/optional-features/livestreaming/","name":"Livestreaming (Pixelfed Live)","logo":"https://docs.pixelfed.org/images/icon.png"}</script><meta property="article:publisher" content><meta property="og:article:published_time" content="0001-01-01T00:00:00Z"><meta property="article:published_time" content="0001-01-01T00:00:00Z"><link rel=sitemap type=application/xml title=Sitemap href=https://docs.pixelfed.org/sitemap.xml><meta name=robots content="index,follow"><meta name=googlebot content="index,follow"><link rel=manifest href=https://docs.pixelfed.org/manifest.json><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#ffffff"><meta name=imagemode content="force"><meta name=coverage content="Worldwide"><meta name=distribution content="Global"><meta name=HandheldFriendly content="True"><meta name=msapplication-tap-highlight content="no"><meta name=apple-mobile-web-app-title content="Pixelfed Documentation"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black-translucent"><meta name=apple-touch-fullscreen content="yes"><style>a[href^=http]::after,a[href^="https://"]::after{content:"";width:11px;height:11px;margin-left:4px;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' d='M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5z'/%3E%3Cpath fill-rule='evenodd' d='M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0v-5z'/%3E%3C/svg%3E");background-position:50%;background-repeat:no-repeat;background-size:contain;display:inline-block}a[href^="https\3a\2f\2f docs.pixelfed.org\2f "]::after{display:none!important}a[href^="http://localhost"]::after{display:none!important}</style></head><body><header class=site-header><div class=container><a href=/ class=site-masthead><img class=site-icon height=32 src="https://avatars0.githubusercontent.com/u/38410642?s=200&amp;amp;v=4"><p class=site-title>Pixelfed Documentation</p></a><form id=search-form action=https://docs.pixelfed.org/search/ method=get><label hidden for=search-input>Search site</label>
<input id=search-input type=text name=query placeholder="Type here to search">
<input id=search-submit type=submit value=search></form><nav class=extra-nav><div class=container><ul class=menu><li><a href=https://pixelfed.org><img src="https://avatars0.githubusercontent.com/u/38410642?s=200&v=4" height=24 style=margin-right:.25em>
<span>pixelfed.org</span></a></li><li><a href=https://github.com/pixelfed/pixelfed><svg width="24" height="24" viewBox="0 0 1024 1024" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59C5.87 15.66 6.02 15.42 6.02 15.21 6.02 15.02 6.01 14.39 6.01 13.72 4 14.09 3.48 13.23 3.32 12.78 3.23 12.55 2.84 11.84 2.5 11.65 2.22 11.5 1.82 11.13 2.49 11.12 3.12 11.11 3.57 11.7 3.72 11.94 4.44 13.15 5.59 12.81 6.05 12.6 6.12 12.08 6.33 11.73 6.56 11.53 4.78 11.33 2.92 10.64 2.92 7.58c0-.87.31-1.59.82-2.15C3.66 5.23 3.38 4.41 3.82 3.31c0 0 .67-.21 2.2.82C6.66 3.95 7.34 3.86 8.02 3.86S9.38 3.95 10.02 4.13c1.53-1.04 2.2-.82 2.2-.82C12.66 4.41 12.38 5.23 12.3 5.43 12.81 5.99 13.12 6.7 13.12 7.58c0 3.07-1.87 3.75-3.65 3.95C9.76 11.78 10.01 12.26 10.01 13.01 10.01 14.08 10 14.94 10 15.21 10 15.42 10.15 15.67 10.55 15.59 13.71 14.53 16 11.53 16 8c0-4.42-3.58-8-8-8z" transform="scale(64)" fill="#1b1f23"/></svg><span>Github</span></a></li></ul></div></nav></div></header><nav class="site-nav section"><div class=container><input type=checkbox class=toggle-menu name=toggle id=toggle>
<label class=toggle-menu__label for=toggle><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h7"/></svg>Menu</label><ul class=menu><a id=menu href=#top>Skip menu</a><li class=section-title><a href=https://docs.pixelfed.org/running-pixelfed/><span>Run your own Pixelfed website</span></a><ul class=sub-menu><li><a href=https://docs.pixelfed.org/running-pixelfed/prerequisites/><span>Preparing your machine</span></a></li><li><a href=https://docs.pixelfed.org/running-pixelfed/installation/><span>Generic installation guide</span></a></li><li><a href=https://docs.pixelfed.org/running-pixelfed/administration/><span>Administering your website</span></a></li><li><a href=https://docs.pixelfed.org/running-pixelfed/troubleshooting/><span>Troubleshooting</span></a></li><li><a href=https://docs.pixelfed.org/running-pixelfed/optional-features/><span>Optional features</span></a><ul class=sub-menu><li class=active><a href=https://docs.pixelfed.org/running-pixelfed/optional-features/livestreaming/><span>Livestreaming (Pixelfed Live)</span></a></li><li><a href=https://docs.pixelfed.org/running-pixelfed/optional-features/ldap-authentication/><span>LDAP Authentication</span></a></li><li><a href=https://docs.pixelfed.org/running-pixelfed/optional-features/websockets/><span>Websockets</span></a></li></ul></li></ul></li><li class=section-title><a href=https://docs.pixelfed.org/developing-pixelfed/><span>Developing for Pixelfed</span></a><ul class=sub-menu><li><a href=https://docs.pixelfed.org/developing-pixelfed/intro/><span>Setting up your environment</span></a></li></ul></li><li class=section-title><a href=https://docs.pixelfed.org/technical-documentation/><span>Technical documentation</span></a><ul class=sub-menu><li><a href=https://docs.pixelfed.org/technical-documentation/activitypub/><span>ActivityPub</span></a></li><li><a href=https://docs.pixelfed.org/technical-documentation/config/><span>Configuration</span></a></li><li><a href=https://docs.pixelfed.org/technical-documentation/artisan/><span>Laravel Artisan</span></a></li><li><a href=https://docs.pixelfed.org/technical-documentation/api-v1/><span>v1 API</span></a></li></ul></li><li class=section-title><a href=https://docs.pixelfed.org/install-guides/><span>Distro-specific install guides</span></a><ul class=sub-menu><li><a href=https://docs.pixelfed.org/install-guides/arch/><span>Arch Linux</span></a></li></ul></li></ul></div></nav><div class=scroll-margin style=position:relative><div id=top style=scroll-margin-top:var(--header-height)></div></div><main><article class=page><header class="page-header section"><div class=container><h1 class=page-title>Livestreaming (Pixelfed Live)</h1><p class=page-summary>Pixelfed Live is a mobile based livestreaming feature.</p><p class=lastmod>Last modified <datetime class=date>Sun Aug 7, 2022</datetime> - <a href=https://github.com/pixelfed/docs/edit/hugo/content/en/running-pixelfed/optional-features/livestreaming.md>Edit this page on Github</a></p></div></header><aside class="toc section"><div class=container><p class=toc-title>Page outline</p><nav id=TableOfContents><ol><li><a href=#installing-and-configuring-nginx-rtmp>Installing and Configuring Nginx-RTMP</a></li><li><a href=#configure-livestreaming-settings>Configure Livestreaming Settings</a><ol><li><a href=#basic-configuration>Basic configuration</a></li><li><a href=#advanced-configuration>Advanced configuration</a></li></ol></li></ol></nav></div></aside><section class="content section"><div class=container><h2 id=installing-and-configuring-nginx-rtmp><span>Installing and Configuring Nginx-RTMP</span>
<a class=heading-anchor href=#installing-and-configuring-nginx-rtmp>⛓</a></h2><p>Begin by running the following commands as a non-root user to update your package listings and install the Nginx module:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt update
</span></span><span class=line><span class=cl>sudo apt install libnginx-mod-rtmp
</span></span></code></pre></div><p>Installing the module won’t automatically start providing a stream. You’ll need to add a configuration block to your Nginx configuration file that defines where and how the stream will be available.</p><p>Using nano or your favorite text editor, open Nginx’s main configuration file, /etc/nginx/nginx.conf, and add this configuration block to the end of the file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo nano /etc/nginx/nginx.conf
</span></span></code></pre></div><p>Make sure you edit lines <strong>16</strong>, <strong>17</strong> with your domain (leave http:// and the path as is), and line <strong>29</strong> with the path to your <code>storage/app/public/live-hls</code> directory</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rtmp <span class=o>{</span>
</span></span><span class=line><span class=cl>    server <span class=o>{</span>
</span></span><span class=line><span class=cl>        listen 1935<span class=p>;</span>
</span></span><span class=line><span class=cl>        chunk_size 4096<span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        application live <span class=o>{</span>
</span></span><span class=line><span class=cl>            live on<span class=p>;</span>
</span></span><span class=line><span class=cl>            record off<span class=p>;</span>
</span></span><span class=line><span class=cl>            interleave on<span class=p>;</span>
</span></span><span class=line><span class=cl>            wait_key on<span class=p>;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            deny play all<span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            push rtmp://127.0.0.1:1935/hls-live <span class=nv>flashver</span><span class=o>=</span>FMLE/3.0<span class=p>;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            on_publish http://localhost/api/live/broadcast/publish<span class=p>;</span>
</span></span><span class=line><span class=cl>            on_publish_done http://localhost/api/live/broadcast/finish<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        application hls-live <span class=o>{</span>
</span></span><span class=line><span class=cl>            live on<span class=p>;</span>
</span></span><span class=line><span class=cl>            hls on<span class=p>;</span>
</span></span><span class=line><span class=cl>            interleave on<span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            deny play all<span class=p>;</span>
</span></span><span class=line><span class=cl>            allow publish 127.0.0.1<span class=p>;</span>
</span></span><span class=line><span class=cl>            deny publish all<span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            hls_path /home/pixelfed/storage/app/public/live-hls<span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>            hls_nested on<span class=p>;</span>
</span></span><span class=line><span class=cl>            hls_fragment 5s<span class=p>;</span>
</span></span><span class=line><span class=cl>            hls_playlist_length 30s<span class=p>;</span>
</span></span><span class=line><span class=cl>            hls_fragment_naming system<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>Save and close the file. If you are using <code>nano</code>, press <kbd>Ctrl+X</kbd>, then when prompted, <kbd>Y</kbd> and <kbd>Enter</kbd>.</p><p>This provides the beginning of your RTMP configuration. By default, it listens on port 1935, which means you’ll need to open that port in your firewall. If you configured ufw as part of your initial server setup run the following command.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw allow 1935/tcp
</span></span></code></pre></div><p>Now you can reload Nginx with your changes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl reload nginx.service
</span></span></code></pre></div><p>You should now have a working RTMP server. In the next section, we’ll configure the environment settings.</p><h2 id=configure-livestreaming-settings><span>Configure Livestreaming Settings</span>
<a class=heading-anchor href=#configure-livestreaming-settings>⛓</a></h2><p>Now you have the RTMP server setup, you can proceed to add the following environment variables to your <code>.env</code> file.</p><h3 id=basic-configuration><span>Basic configuration</span>
<a class=heading-anchor href=#basic-configuration>⛓</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>// Enable Pixelfed Live
</span></span><span class=line><span class=cl><span class=nv>HLS_LIVE</span><span class=o>=</span><span class=nb>true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// RTMP server domain
</span></span><span class=line><span class=cl><span class=nv>HLS_LIVE_HOST</span><span class=o>=</span>pixelfed.social
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// Enable livestreaming from the Pixelfed Live app
</span></span><span class=line><span class=cl><span class=nv>HLS_LIVE_BROADCAST_SOURCE_APP</span><span class=o>=</span><span class=nb>true</span>
</span></span></code></pre></div><h3 id=advanced-configuration><span>Advanced configuration</span>
<a class=heading-anchor href=#advanced-configuration>⛓</a></h3><p>In addition to the basic configuration variables, the following variables can be used optionally</p><h4 id=stream-limits><span>Stream Limits</span>
<a class=heading-anchor href=#stream-limits>⛓</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>// Max concurrent live streams
</span></span><span class=line><span class=cl><span class=nv>HLS_LIVE_BROADCAST_MAX_ACTIVE</span><span class=o>=</span><span class=m>10</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// Max stream duration in minutes
</span></span><span class=line><span class=cl><span class=nv>HLS_LIVE_BROADCAST_MAX_DURATION</span><span class=o>=</span><span class=m>60</span>
</span></span></code></pre></div><h4 id=user-limits><span>User Limits</span>
<a class=heading-anchor href=#user-limits>⛓</a></h4><p>Advanced control over who can livestream</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>// Enable broadcast limits
</span></span><span class=line><span class=cl><span class=nv>HLS_LIVE_BROADCAST_LIMITS</span><span class=o>=</span><span class=nb>true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// Only allow users with over <span class=m>1000</span> followers to go live
</span></span><span class=line><span class=cl><span class=nv>HLS_LIVE_BROADCAST_LIMITS_MIN_FOLLOWERS</span><span class=o>=</span><span class=m>1000</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// Only allow users with accounts older than <span class=m>90</span> days to go live
</span></span><span class=line><span class=cl><span class=nv>HLS_LIVE_BROADCAST_LIMITS_MIN_ACCOUNT_AGE</span><span class=o>=</span><span class=m>90</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// Only allow admin accounts to go live
</span></span><span class=line><span class=cl><span class=nv>HLS_LIVE_BROADCAST_LIMITS_ADMINS_ONLY</span><span class=o>=</span><span class=nb>true</span>
</span></span></code></pre></div></div></section><footer class=section><div class=container><nav class=section-nav><a class=previous href=https://docs.pixelfed.org/running-pixelfed/optional-features/websockets/><span class=arrow>←</span><span class=text>Previous page:<br>Websockets</span></a>
<a class=next href=https://docs.pixelfed.org/running-pixelfed/optional-features/ldap-authentication/><span class=text>Next page:<br>LDAP Authentication</span><span class=arrow>→</span></a></nav></div></footer></article></main><footer class=site-footer><hr><div class=container><a href=#top>back to top</a></div></footer><script src=https://unpkg.com/lunr/lunr.js></script>
<script type=text/javascript src=https://docs.pixelfed.org/js/search.min.min.2a154854f469aeb7a58abc0acf08e4219056bff7fc63c967931f0d6b8b611058.js integrity="sha256-KhVIVPRprrelirwKzwjkIZBWv/f8Y8lnkx8Na4thEFg="></script></body></html>