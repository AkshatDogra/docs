<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Livestreaming (Pixelfed Live) | Pixelfed Documentation</title>
    <meta name="generator" content="VuePress 1.9.5">
    
    <meta name="description" content="Documentation for pixelfed">
    
    <link rel="preload" href="/assets/css/0.styles.da76508a.css" as="style"><link rel="preload" href="/assets/js/app.5d961e38.js" as="script"><link rel="preload" href="/assets/js/2.5222fe39.js" as="script"><link rel="preload" href="/assets/js/18.3707f7c9.js" as="script"><link rel="prefetch" href="/assets/js/10.00e54b99.js"><link rel="prefetch" href="/assets/js/11.5d955e43.js"><link rel="prefetch" href="/assets/js/12.e25e74c3.js"><link rel="prefetch" href="/assets/js/13.b6dae06c.js"><link rel="prefetch" href="/assets/js/14.ac05341a.js"><link rel="prefetch" href="/assets/js/15.57d99257.js"><link rel="prefetch" href="/assets/js/16.20c62c1f.js"><link rel="prefetch" href="/assets/js/17.38663d42.js"><link rel="prefetch" href="/assets/js/19.1fb87927.js"><link rel="prefetch" href="/assets/js/20.ebd6e681.js"><link rel="prefetch" href="/assets/js/21.29ac4db4.js"><link rel="prefetch" href="/assets/js/22.fe507065.js"><link rel="prefetch" href="/assets/js/23.ea383f04.js"><link rel="prefetch" href="/assets/js/24.e6a42350.js"><link rel="prefetch" href="/assets/js/25.0e25ba57.js"><link rel="prefetch" href="/assets/js/26.3ec18fe3.js"><link rel="prefetch" href="/assets/js/3.3bb32442.js"><link rel="prefetch" href="/assets/js/4.b1436b98.js"><link rel="prefetch" href="/assets/js/5.03ed82cd.js"><link rel="prefetch" href="/assets/js/6.0723d9d0.js"><link rel="prefetch" href="/assets/js/7.7951f665.js"><link rel="prefetch" href="/assets/js/8.8a3c5731.js"><link rel="prefetch" href="/assets/js/9.e9b622c2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.da76508a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://avatars0.githubusercontent.com/u/38410642?s=200&amp;v=4" alt="Pixelfed Documentation" class="logo"> <span class="site-name can-hide">Pixelfed Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://pixelfed.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  pixelfed.org
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/pixelfed/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://pixelfed.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  pixelfed.org
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/pixelfed/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Run your own Pixelfed website</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/running-pixelfed/prerequisites.html" class="sidebar-link">Preparing your machine</a></li><li><a href="/running-pixelfed/installation.html" class="sidebar-link">Generic installation guide</a></li><li><a href="/running-pixelfed/administration.html" class="sidebar-link">Administering your website</a></li><li><a href="/running-pixelfed/troubleshooting.html" class="sidebar-link">Troubleshooting</a></li><li><a href="/running-pixelfed/livestreaming.html" aria-current="page" class="active sidebar-link">Livestreaming (Pixelfed Live)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/running-pixelfed/livestreaming.html#installing-and-configuring-nginx-rtmp" class="sidebar-link">Installing and Configuring Nginx-RTMP</a></li><li class="sidebar-sub-header"><a href="/running-pixelfed/livestreaming.html#configure-livestreaming-settings" class="sidebar-link">Configure Livestreaming Settings</a></li></ul></li><li><a href="/running-pixelfed/websockets.html" class="sidebar-link">Websockets</a></li><li><a href="/running-pixelfed/ldap-authentication.html" class="sidebar-link">LDAP Authentication</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Technical documentation</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/technical-documentation/activitypub.html" class="sidebar-link">ActivityPub Federation</a></li><li><a href="/technical-documentation/api-v1.html" class="sidebar-link">v1 API</a></li><li><a href="/technical-documentation/artisan.html" class="sidebar-link">Laravel Artisan</a></li><li><a href="/technical-documentation/env.html" class="sidebar-link">Configuration</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Distro-specific deploy guides</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="livestreaming-pixelfed-live"><a href="#livestreaming-pixelfed-live" class="header-anchor">#</a> Livestreaming (Pixelfed Live)</h1> <p>Pixelfed Live is a mobile based livestreaming feature.</p> <p></p><div class="table-of-contents"><ul><li><a href="#installing-and-configuring-nginx-rtmp">Installing and Configuring Nginx-RTMP</a></li><li><a href="#configure-livestreaming-settings">Configure Livestreaming Settings</a><ul><li><a href="#basic-configuration">Basic configuration</a></li><li><a href="#advanced-configuration">Advanced configuration</a></li></ul></li></ul></div><p></p> <h2 id="installing-and-configuring-nginx-rtmp"><a href="#installing-and-configuring-nginx-rtmp" class="header-anchor">#</a> Installing and Configuring Nginx-RTMP</h2> <p>Begin by running the following commands as a non-root user to update your package listings and install the Nginx module:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> libnginx-mod-rtmp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Installing the module won’t automatically start providing a stream. You’ll need to add a configuration block to your Nginx configuration file that defines where and how the stream will be available.</p> <p>Using nano or your favorite text editor, open Nginx’s main configuration file, /etc/nginx/nginx.conf, and add this configuration block to the end of the file:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">nano</span> /etc/nginx/nginx.conf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Make sure you edit lines <strong>16</strong>, <strong>17</strong> with your domain (leave http:// and the path as is), and line <strong>29</strong> with the path to your <code>storage/app/public/live-hls</code> directory</p> <div class="language-bash line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br></div><pre class="language-bash"><code>rtmp <span class="token punctuation">{</span>
    server <span class="token punctuation">{</span>
        listen <span class="token number">1935</span><span class="token punctuation">;</span>
        chunk_size <span class="token number">4096</span><span class="token punctuation">;</span>

        application live <span class="token punctuation">{</span>
            live on<span class="token punctuation">;</span>
            record off<span class="token punctuation">;</span>
            interleave on<span class="token punctuation">;</span>
            wait_key on<span class="token punctuation">;</span>
            
            deny play all<span class="token punctuation">;</span>

            push rtmp://127.0.0.1:1935/hls-live <span class="token assign-left variable">flashver</span><span class="token operator">=</span>FMLE/3.0<span class="token punctuation">;</span>
            
            on_publish http://localhost/api/live/broadcast/publish<span class="token punctuation">;</span>
            on_publish_done http://localhost/api/live/broadcast/finish<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        application hls-live <span class="token punctuation">{</span>
            live on<span class="token punctuation">;</span>
            hls on<span class="token punctuation">;</span>
            interleave on<span class="token punctuation">;</span>

            deny play all<span class="token punctuation">;</span>
            allow publish <span class="token number">127.0</span>.0.1<span class="token punctuation">;</span>
            deny publish all<span class="token punctuation">;</span>

            hls_path /home/pixelfed/storage/app/public/live-hls<span class="token punctuation">;</span>
        
            hls_nested on<span class="token punctuation">;</span>
            hls_fragment 5s<span class="token punctuation">;</span>
            hls_playlist_length 30s<span class="token punctuation">;</span>
            hls_fragment_naming system<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>Save and close the file. If you are using <code>nano</code>, press <kbd>Ctrl+X</kbd>, then when prompted, <kbd>Y</kbd> and <kbd>Enter</kbd>.</p> <p>This provides the beginning of your RTMP configuration. By default, it listens on port 1935, which means you’ll need to open that port in your firewall. If you configured ufw as part of your initial server setup run the following command.</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> ufw allow <span class="token number">1935</span>/tcp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Now you can reload Nginx with your changes:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl reload nginx.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>You should now have a working RTMP server. In the next section, we’ll configure the environment settings.</p> <h2 id="configure-livestreaming-settings"><a href="#configure-livestreaming-settings" class="header-anchor">#</a> Configure Livestreaming Settings</h2> <p>Now you have the RTMP server setup, you can proceed to add the following environment variables to your <code>.env</code> file.</p> <h3 id="basic-configuration"><a href="#basic-configuration" class="header-anchor">#</a> Basic configuration</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>// Enable Pixelfed Live
<span class="token assign-left variable">HLS_LIVE</span><span class="token operator">=</span>true

// RTMP server domain
<span class="token assign-left variable">HLS_LIVE_HOST</span><span class="token operator">=</span>pixelfed.social

// Enable livestreaming from the Pixelfed Live app
<span class="token assign-left variable">HLS_LIVE_BROADCAST_SOURCE_APP</span><span class="token operator">=</span>true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="advanced-configuration"><a href="#advanced-configuration" class="header-anchor">#</a> Advanced configuration</h3> <p>In addition to the basic configuration variables, the following variables can be used optionally</p> <h4 id="stream-limits"><a href="#stream-limits" class="header-anchor">#</a> Stream Limits</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>// Max concurrent live streams
<span class="token assign-left variable">HLS_LIVE_BROADCAST_MAX_ACTIVE</span><span class="token operator">=</span><span class="token number">10</span>

// Max stream duration <span class="token keyword">in</span> minutes
<span class="token assign-left variable">HLS_LIVE_BROADCAST_MAX_DURATION</span><span class="token operator">=</span><span class="token number">60</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="user-limits"><a href="#user-limits" class="header-anchor">#</a> User Limits</h4> <p>Advanced control over who can livestream</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>// Enable broadcast limits
<span class="token assign-left variable">HLS_LIVE_BROADCAST_LIMITS</span><span class="token operator">=</span>true

// Only allow <span class="token function">users</span> with over <span class="token number">1000</span> followers to go live
<span class="token assign-left variable">HLS_LIVE_BROADCAST_LIMITS_MIN_FOLLOWERS</span><span class="token operator">=</span><span class="token number">1000</span>

// Only allow <span class="token function">users</span> with accounts older than <span class="token number">90</span> days to go live
<span class="token assign-left variable">HLS_LIVE_BROADCAST_LIMITS_MIN_ACCOUNT_AGE</span><span class="token operator">=</span><span class="token number">90</span>

// Only allow admin accounts to go live
<span class="token assign-left variable">HLS_LIVE_BROADCAST_LIMITS_ADMINS_ONLY</span><span class="token operator">=</span>true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/pixelfed/docs/edit/main/running-pixelfed/livestreaming.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/running-pixelfed/troubleshooting.html" class="prev">
        Troubleshooting
      </a></span> <span class="next"><a href="/running-pixelfed/websockets.html">
        Websockets
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5d961e38.js" defer></script><script src="/assets/js/2.5222fe39.js" defer></script><script src="/assets/js/18.3707f7c9.js" defer></script>
  </body>
</html>
