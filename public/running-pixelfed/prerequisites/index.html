<!DOCTYPE html>
<html lang="en" xml:lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<link rel="stylesheet" href="https://docs.pixelfed.org/css/theme.screen.css" media="screen" />
		<script type="text/javascript" href="https://docs.pixelfed.org/js/script.js"></script>
		
<link rel="shortcut icon" href='https://docs.pixelfed.org/images/icon.png' sizes="765x765">

	

<title>Preparing your machine | Pixelfed Documentation</title>
<title itemprop="name">Preparing your machine | Pixelfed Documentation</title>
<meta property="og:title" content="Preparing your machine | Pixelfed Documentation" />
<meta name="twitter:title" content="Preparing your machine | Pixelfed Documentation" />
<meta itemprop="name" content="Preparing your machine | Pixelfed Documentation" />
<meta name="application-name" content="Pixelfed Documentation" />
<meta property="og:site_name" content="Pixelfed Documentation" />
<meta name="description" content="Download, install, and configure some pre-requisites.">
<meta itemprop="description" content="Download, install, and configure some pre-requisites." />
<meta property="og:description" content="Download, install, and configure some pre-requisites." />
<meta name="twitter:description" content="Download, install, and configure some pre-requisites." />
<base href="https://docs.pixelfed.org/running-pixelfed/prerequisites/">
<link rel="canonical" href="https://docs.pixelfed.org/running-pixelfed/prerequisites/" itemprop="url" /> 
<meta name="url" content="https://docs.pixelfed.org/running-pixelfed/prerequisites/" />
<meta name="twitter:url" content="https://docs.pixelfed.org/running-pixelfed/prerequisites/" /> 
<meta property="og:url" content="https://docs.pixelfed.org/running-pixelfed/prerequisites/" />

<meta itemprop="image" content='https://docs.pixelfed.org/images/icon.png' />
<meta property="og:image" content='https://docs.pixelfed.org/images/icon.png' />
<meta name="twitter:image" content='https://docs.pixelfed.org/images/icon.png' />
<meta name="twitter:image:src" content='https://docs.pixelfed.org/images/icon.png' />
<meta property="og:updated_time" content=2022-08-06T09:40:16-0500 />
<meta property="og:type" content="website" /> 
<meta name="author" content="" />
<script defer type="application/ld+json">
	{ 
		"@context": "http://schema.org", 
		"@type": "WebSite", 
		"url": "https://docs.pixelfed.org/running-pixelfed/prerequisites/", 
		"name": "Preparing your machine", 
		"logo": "https://docs.pixelfed.org/images/icon.png"
	}
</script>
<meta property="article:publisher" content="" />


<meta property="og:article:published_time" content=0001-01-01T00:00:00Z /> 
<meta property="article:published_time" content=0001-01-01T00:00:00Z />
<link rel="sitemap" type="application/xml" title="Sitemap" href="https://docs.pixelfed.org/sitemap.xml" /> 

<meta name="robots" content="index,follow" /> 
<meta name="googlebot" content="index,follow" />
<link rel="manifest" href="https://docs.pixelfed.org/manifest.json" />
<meta name="theme-color" content="#ffffff" /> 
<meta name="msapplication-TileColor" content="#ffffff" />
<meta name="imagemode" content="force" />
<meta name="coverage" content="Worldwide" /> 
<meta name="distribution" content="Global" />
<meta name="HandheldFriendly" content="True" /> 
<meta name="msapplication-tap-highlight" content="no" />
<meta name="apple-mobile-web-app-title" content="Pixelfed Documentation" /> 
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-touch-fullscreen" content="yes" />
		
		
	</head>
	<body>
		<header class="site-header">
	<div class="container">
		<a href="/" class="site-masthead">
			<img class="site-icon" height="32" src="https://avatars0.githubusercontent.com/u/38410642?s=200&amp;amp;v=4">
			<p class="site-title">Pixelfed Documentation</p>
		</a>
		<nav class="extra-nav">
	<div class="container">
		<ul class="menu">
			
			<li>
				<a href="https://pixelfed.org">
					
					<span>pixelfed.org</span>
					
				 </a>
			</li>
			
			<li>
				<a href="https://github.com/pixelfed/pixelfed">
					
					<span>Github</span>
					
				 </a>
			</li>
			
		</ul>
	</div>
</nav>
	</div>
</header>
<div class="scroll-margin" style="position: relative;">
	<div id="top" style="scroll-margin-top: var(--header-height);"></div>
</div>
<nav class="site-nav section">
	<div class="container">
		<input type="checkbox" class="toggle-menu" name="toggle" id="toggle">
		<label class="toggle-menu__label" for="toggle"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
			<path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h7" />
		 </svg> Menu</label>
		<ul class="menu">
			<a id="menu" href="#top">Skip menu</a>
			
			
				
				<li class='section-title'>
				 <a href="https://docs.pixelfed.org/running-pixelfed/">
					
					<span>Run your own Pixelfed website</span>
					
				 </a>
				 <ul class="sub-menu">
						
							
							<li class='active'>
								<a href="https://docs.pixelfed.org/running-pixelfed/prerequisites/">
								  
								  <span>Preparing your machine</span>
								  
								</a>
						  </li>
							
						
							
							<li class=''>
								<a href="https://docs.pixelfed.org/running-pixelfed/installation/">
								  
								  <span>Generic installation guide</span>
								  
								</a>
						  </li>
							
						
							
							<li class=''>
								<a href="https://docs.pixelfed.org/running-pixelfed/administration/">
								  
								  <span>Administering your website</span>
								  
								</a>
						  </li>
							
						
							
							<li class=''>
								<a href="https://docs.pixelfed.org/running-pixelfed/troubleshooting/">
								  
								  <span>Troubleshooting</span>
								  
								</a>
						  </li>
							
						
							
							<li class=''>
								<a href="https://docs.pixelfed.org/running-pixelfed/optional-features/">
								  
								  <span>Optional features</span>
								  
								</a>
								<ul class="sub-menu">
									
									<li class=''>
										<a href="https://docs.pixelfed.org/running-pixelfed/optional-features/livestreaming/">
										  
										  <span>Livestreaming (Pixelfed Live)</span>
										  
										</a>
								  </li>
									
									<li class=''>
										<a href="https://docs.pixelfed.org/running-pixelfed/optional-features/ldap-authentication/">
										  
										  <span>LDAP Authentication</span>
										  
										</a>
								  </li>
									
									<li class=''>
										<a href="https://docs.pixelfed.org/running-pixelfed/optional-features/websockets/">
										  
										  <span>Websockets</span>
										  
										</a>
								  </li>
									
								</ul>
						  </li>
							
						
				 </ul>
			</li>
				
			
				
				<li class='section-title'>
				 <a href="https://docs.pixelfed.org/developing-pixelfed/">
					
					<span>Developing for Pixelfed</span>
					
				 </a>
				 <ul class="sub-menu">
						
							
							<li class=''>
								<a href="https://docs.pixelfed.org/developing-pixelfed/intro/">
								  
								  <span>Setting up your environment</span>
								  
								</a>
						  </li>
							
						
				 </ul>
			</li>
				
			
				
				<li class='section-title'>
				 <a href="https://docs.pixelfed.org/technical-documentation/">
					
					<span>Technical documentation</span>
					
				 </a>
				 <ul class="sub-menu">
						
							
							<li class=''>
								<a href="https://docs.pixelfed.org/technical-documentation/activitypub/">
								  
								  <span>ActivityPub</span>
								  
								</a>
						  </li>
							
						
							
							<li class=''>
								<a href="https://docs.pixelfed.org/technical-documentation/config/">
								  
								  <span>Configuration</span>
								  
								</a>
						  </li>
							
						
							
							<li class=''>
								<a href="https://docs.pixelfed.org/technical-documentation/artisan/">
								  
								  <span>Laravel Artisan</span>
								  
								</a>
						  </li>
							
						
							
							<li class=''>
								<a href="https://docs.pixelfed.org/technical-documentation/api-v1/">
								  
								  <span>v1 API</span>
								  
								</a>
						  </li>
							
						
				 </ul>
			</li>
				
			
				
				<li class='section-title'>
				 <a href="https://docs.pixelfed.org/install-guides/">
					
					<span>Distro-specific install guides</span>
					
				 </a>
				 <ul class="sub-menu">
						
							
							<li class=''>
								<a href="https://docs.pixelfed.org/install-guides/arch/">
								  
								  <span>Arch Linux</span>
								  
								</a>
						  </li>
							
						
				 </ul>
			</li>
				
			
	  </ul>
	</div>
</nav>
		
<main>
	<article class="page">
		<header class="page-header section">
			<div class="container">
				<h1 class="page-title">Preparing your machine</h1>
				<p class="page-summary">Download, install, and configure some pre-requisites.</p>
				<p class="lastmod">Last modified <datetime class="date"> Sat Aug 6, 2022 </datetime> - <a href="https://github.com/pixelfed/docs/edit/hugo/content/en/running-pixelfed/prerequisites.md">Edit this page on Github</a></p>
				

			</div>
		</header>
		<aside class="toc section">
			<div class="container">
				<p class="toc-title">Page outline</p>
			<nav id="TableOfContents">
  <ol>
    <li><a href="#http-web-server">HTTP Web server</a></li>
    <li><a href="#database">Database</a></li>
    <li><a href="#php-fpm">PHP-FPM</a></li>
    <li><a href="#creating-a-dedicated-app-user-and-using-unix-sockets-optional">Creating a dedicated app-user and using UNIX sockets (optional)</a>
      <ol>
        <li><a href="#configuring-php-fpm-pool-and-socket">Configuring PHP-FPM pool and socket</a></li>
        <li><a href="#configuring-redis-socket">Configuring Redis socket</a></li>
      </ol>
    </li>
  </ol>
</nav>
			</div>
		</aside>
		<section class="content section">
			<div class="container">
				<p>Before you install Pixelfed, you will need to setup a webserver with the required dependencies:</p>
<ul>
<li>An HTTP server</li>
<li>An SQL database server</li>
<li>A PHP-FPM server</li>
<li><a href="https://getcomposer.org/">Composer</a>, for PHP dependency management</li>
<li><a href="https://git-scm.com/">Git</a>, for fetching updates</li>
<li><a href="https://redis.io/">Redis</a>, for in-memory caching and background task queueing</li>
<li><a href="https://libgd.github.io/">GD</a>, for image processing</li>
<li><a href="https://github.com/tjko/jpegoptim">JPEGOptim</a>, for optimizing JPG</li>
<li><a href="http://optipng.sourceforge.net/">OptiPNG</a>, for lossless PNG</li>
<li><a href="https://pngquant.org/">PNGQuant</a>, for lossy PNG</li>
<li><a href="https://ffmpeg.org/">ffmpeg</a>, for generating video thumbnails</li>
</ul>
<div class='warning hint'>
	<p><strong>Shared Hosting</strong></p>
<p>At this stage, it&rsquo;s not possible to install Pixelfed by downloading a ZIP file and uploading the files to your web server. This is because Composer needs to run on the command line.</p>
<p>This doesn&rsquo;t necessarily mean you need a VPS. Some shared hosts give you SSH access, through which you should be able to install Composer and Pixelfed just fine.</p>

</div>
<h2 id="http-web-server">
    <span>HTTP Web server</span>
	 <a class="heading-anchor" href="#http-web-server">
		⛓
    </a>
</h2><p>The following web servers are officially supported:</p>
<ul>
<li>Apache (with <code>mod_rewrite</code> enabled)</li>
<li>nginx</li>
</ul>
<p>Pixelfed uses HTTPS URIs, so you will need to have HTTPS set up at the perimeter of your network before you proxy requests internally.</p>
<h2 id="database">
    <span>Database</span>
	 <a class="heading-anchor" href="#database">
		⛓
    </a>
</h2><p>You can choose one of three supported database drivers:</p>
<ul>
<li>MySQL (5.7+)</li>
<li>MariaDB (10.2.7+ &ndash; 10.3.5+ recommended)</li>
<li>PostgreSQL (10+)</li>
</ul>
<p>You will need to create a database and grant permission to an SQL user identified by a password. To do this with MySQL or MariaDB, do the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo mysql -u root -p
</span></span></code></pre></div><p>You can then create a database and grant privileges to your SQL user. The following SQL commands will create a database named <code>pixelfed</code> and allow it to be managed by a user <code>pixelfed</code> with password <code>strong_password</code>:</p>
<pre tabindex="0"><code class="language-sql{1,2}" data-lang="sql{1,2}">create database pixelfed;
grant all privileges on pixelfed.* to &#39;pixelfed&#39;@&#39;localhost&#39; identified by &#39;strong_password&#39;;
flush privileges;
</code></pre><p>To do this with PostgreSQL instead, do the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo -u postgres psql
</span></span></code></pre></div><p>Once in the psql shell, do the following:</p>
<pre tabindex="0"><code>CREATE USER pixelfed CREATEDB;
\q
</code></pre><div class='warning hint'>
	<p><strong>Changing database drivers</strong></p>
<p>If you decide to change database drivers later, please run a backup first! You can do this with <code>php artisan backup:run --only-db</code></p>

</div>
<h2 id="php-fpm">
    <span>PHP-FPM</span>
	 <a class="heading-anchor" href="#php-fpm">
		⛓
    </a>
</h2><p>You can check your currently installed version of PHP-FPM by running <code>php-fpm -v</code>. Make sure you are running <strong>PHP &gt;= 7.3</strong>.</p>
<p>You can check your currently loaded extensions by running <code>php-fpm -m</code>. Modules are usually enabled by editing your PHP configuration file and uncommenting the appropriate lines under the &ldquo;Dynamic extensions&rdquo; section. Make sure the following extensions are installed and loaded:</p>
<ul>
<li><code>bcmath</code></li>
<li><code>ctype</code></li>
<li><code>curl</code></li>
<li><code>exif</code></li>
<li><code>gd</code></li>
<li><code>iconv</code></li>
<li><code>intl</code></li>
<li><code>json</code></li>
<li><code>mbstring</code></li>
<li><code>openssl</code></li>
<li><code>redis</code></li>
<li><code>tokenizer</code></li>
<li><code>xml</code></li>
<li><code>zip</code></li>
</ul>
<p>Additionally, you will need to enable extensions for database drivers:</p>
<ul>
<li>For MySQL or MariaDB: enable <code>pdo_mysql</code> and <code>mysqli</code></li>
<li>For PostgreSQL: enable <code>pdo_pgsql</code> and <code>pgsql</code></li>
</ul>
<p>Finally, make sure to set the desired upload limits for your PHP processes. You will want to check the following:</p>
<ul>
<li><code>post_max_size</code> (default 8M, set this around or slightly greater than your desired post size limit)</li>
<li><code>file_uploads</code> (default On, which it needs to be)</li>
<li><code>upload_max_filesize</code> (default 2M, set this &lt;= <code>post_max_size</code>)</li>
<li><code>max_file_uploads</code> (default 20, but make sure it is &gt;= your desired attachment limit)</li>
<li><code>max_execution_time</code> (default 30, consider raising this to 600 or more so that longer tasks aren&rsquo;t interrupted)</li>
</ul>
<div class='tip hint'>
	<p><strong>Instagram imports</strong></p>
<p>Instagram imports are also affected by these settings. If you enable imports, you will want to raise <code>post_max_size</code> to the maximum size you expect an Instagram archive to be, <code>upload_max_filesize</code> to the maximum size you expect individual Instagram photos to be, and <code>max_file_uploads</code> to the maximum number of photos (not posts) you&rsquo;d expect an Instagram archive to contain.</p>

</div>
<h2 id="creating-a-dedicated-app-user-and-using-unix-sockets-optional">
    <span>Creating a dedicated app-user and using UNIX sockets (optional)</span>
	 <a class="heading-anchor" href="#creating-a-dedicated-app-user-and-using-unix-sockets-optional">
		⛓
    </a>
</h2><p>For added security, you may want to create a dedicated user specifically for running Pixelfed. To do this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>useradd -rU -s /bin/bash pixelfed
</span></span></code></pre></div><h3 id="configuring-php-fpm-pool-and-socket">
    <span>Configuring PHP-FPM pool and socket</span>
	 <a class="heading-anchor" href="#configuring-php-fpm-pool-and-socket">
		⛓
    </a>
</h3><pre tabindex="0"><code class="language-bash{1}" data-lang="bash{1}">cd /etc/php/php-fpm.d/
cp www.conf pixelfed.conf
$EDITOR pixelfed.conf
</code></pre><div class='tip hint'>
	<p><strong>Where to define custom PHP-FPM pools</strong></p>
<p>The exact directory you should <code>cd</code> to will vary according to your distribution:</p>
<ul>
<li>Arch Linux uses <code>/etc/php/php-fpm.d</code></li>
<li>Debian and Ubuntu use <code>/etc/php/7.3/fpm/pool.d/</code> (dependent on PHP version)</li>
<li>For other distributions, check your php-fpm.conf to see where exactly you can define <code>*.conf</code> with <code>include=</code></li>
</ul>

</div>
<p>Make the following changes to the PHP-FPM pool:</p>
<pre tabindex="0"><code>;     use the username of the app-user as the pool name, e.g. pixelfed
[pixelfed]
user = pixelfed
group = pixelfed
;    to use a tcp socket, e.g. if running php-fpm on a different machine than your app:
;    (note that the port 9001 is used, since php-fpm defaults to running on port 9000;)
;    (however, the port can be whatever you want)
; listen = 127.0.0.1:9001;
;    but it&#39;s better to use a socket if you&#39;re running locally on the same machine:
listen = /run/php-fpm/pixelfed.sock
listen.owner = http
listen.group = http
listen.mode = 0660
[...]
</code></pre><h3 id="configuring-redis-socket">
    <span>Configuring Redis socket</span>
	 <a class="heading-anchor" href="#configuring-redis-socket">
		⛓
    </a>
</h3><p>Edit <code>redis.conf</code> and edit the following lines:</p>
<pre tabindex="0"><code>port 6379                           # change this to &#34;port 0&#34; to disable network packets
unixsocket /run/redis/redis.sock    # 
unixsocketperm 770                  # give permission to &#34;redis&#34; user and group
</code></pre><div class='tip hint'>
	<p><strong>Where to find redis.conf</strong></p>
<p>The exact location will vary according to your distribution:</p>
<ul>
<li>Arch Linux uses <code>/etc/redis.conf</code></li>
<li>Debian and Ubuntu use <code>/etc/redis/redis.conf</code></li>
<li>For other distributions, check your documentation</li>
</ul>

</div>

			</div>
		</section>
		<footer class="section">
			<div class="container">
				<nav class="section-nav">
	
	<a class="previous" href="https://docs.pixelfed.org/running-pixelfed/troubleshooting/">Previous page:<br/>Troubleshooting</a>
	
	
	<a class="next" href="https://docs.pixelfed.org/running-pixelfed/installation/">Next page:<br/>Generic installation guide</a>
	
</nav>
			</div>
		</footer>
	</article>
</main>

		<footer class="site-footer">
	<hr>
	<div class="container">
		
		<a href="#top">back to top</a>
	</div>
</footer>
	</body>
</html>