<!DOCTYPE html>
<html lang="en" xml:lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<link rel="stylesheet" href="https://docs.pixelfed.org/css/theme.screen.css" media="screen" />
		<script type="text/javascript" href="https://docs.pixelfed.org/js/script.js"></script>
		
<link rel="shortcut icon" href='https://docs.pixelfed.org/images/icon.png' sizes="765x765">

	

<title>Livestreaming (Pixelfed Live) | Pixelfed Documentation</title>
<title itemprop="name">Livestreaming (Pixelfed Live) | Pixelfed Documentation</title>
<meta property="og:title" content="Livestreaming (Pixelfed Live) | Pixelfed Documentation" />
<meta name="twitter:title" content="Livestreaming (Pixelfed Live) | Pixelfed Documentation" />
<meta itemprop="name" content="Livestreaming (Pixelfed Live) | Pixelfed Documentation" />
<meta name="application-name" content="Pixelfed Documentation" />
<meta property="og:site_name" content="Pixelfed Documentation" />
<meta name="description" content="Pixelfed Live is a mobile based livestreaming feature.">
<meta itemprop="description" content="Pixelfed Live is a mobile based livestreaming feature." />
<meta property="og:description" content="Pixelfed Live is a mobile based livestreaming feature." />
<meta name="twitter:description" content="Pixelfed Live is a mobile based livestreaming feature." />
<base href="https://docs.pixelfed.org/running-pixelfed/optional-features/livestreaming/">
<link rel="canonical" href="https://docs.pixelfed.org/running-pixelfed/optional-features/livestreaming/" itemprop="url" /> 
<meta name="url" content="https://docs.pixelfed.org/running-pixelfed/optional-features/livestreaming/" />
<meta name="twitter:url" content="https://docs.pixelfed.org/running-pixelfed/optional-features/livestreaming/" /> 
<meta property="og:url" content="https://docs.pixelfed.org/running-pixelfed/optional-features/livestreaming/" />

<meta itemprop="image" content='https://docs.pixelfed.org/images/icon.png' />
<meta property="og:image" content='https://docs.pixelfed.org/images/icon.png' />
<meta name="twitter:image" content='https://docs.pixelfed.org/images/icon.png' />
<meta name="twitter:image:src" content='https://docs.pixelfed.org/images/icon.png' />
<meta property="og:updated_time" content=2022-08-07T09:42:43-0500 />
<meta property="og:type" content="website" /> 
<meta name="author" content="" />
<script defer type="application/ld+json">
	{ 
		"@context": "http://schema.org", 
		"@type": "WebSite", 
		"url": "https://docs.pixelfed.org/running-pixelfed/optional-features/livestreaming/", 
		"name": "Livestreaming (Pixelfed Live)", 
		"logo": "https://docs.pixelfed.org/images/icon.png"
	}
</script>
<meta property="article:publisher" content="" />


<meta property="og:article:published_time" content=0001-01-01T00:00:00Z /> 
<meta property="article:published_time" content=0001-01-01T00:00:00Z />
<link rel="sitemap" type="application/xml" title="Sitemap" href="https://docs.pixelfed.org/sitemap.xml" /> 

<meta name="robots" content="index,follow" /> 
<meta name="googlebot" content="index,follow" />
<link rel="manifest" href="https://docs.pixelfed.org/manifest.json" />
<meta name="theme-color" content="#ffffff" /> 
<meta name="msapplication-TileColor" content="#ffffff" />
<meta name="imagemode" content="force" />
<meta name="coverage" content="Worldwide" /> 
<meta name="distribution" content="Global" />
<meta name="HandheldFriendly" content="True" /> 
<meta name="msapplication-tap-highlight" content="no" />
<meta name="apple-mobile-web-app-title" content="Pixelfed Documentation" /> 
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-touch-fullscreen" content="yes" />
		
		
	</head>
	<body>
		<header class="site-header">
	<div class="container">
		<a href="/" class="site-masthead">
			<img class="site-icon" height="32" src="https://avatars0.githubusercontent.com/u/38410642?s=200&amp;amp;v=4">
			<p class="site-title">Pixelfed Documentation</p>
		</a>
		<nav class="extra-nav">
	<div class="container">
		<ul class="menu">
			
			<li>
				<a href="https://pixelfed.org">
					
					<span>pixelfed.org</span>
					
				 </a>
			</li>
			
			<li>
				<a href="https://github.com/pixelfed/pixelfed">
					
					<span>Github</span>
					
				 </a>
			</li>
			
		</ul>
	</div>
</nav>
	</div>
</header>
<div class="scroll-margin" style="position: relative;">
	<div id="top" style="scroll-margin-top: var(--header-height);"></div>
</div>
<nav class="site-nav section">
	<div class="container">
		<input type="checkbox" class="toggle-menu" name="toggle" id="toggle">
		<label class="toggle-menu__label" for="toggle"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
			<path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h7" />
		 </svg> Menu</label>
		<ul class="menu">
			<a id="menu" href="#top">Skip menu</a>
			
			
				
				<li class='section-title'>
				 <a href="https://docs.pixelfed.org/running-pixelfed/">
					
					<span>Run your own Pixelfed website</span>
					
				 </a>
				 <ul class="sub-menu">
						
							
							<li class=''>
								<a href="https://docs.pixelfed.org/running-pixelfed/prerequisites/">
								  
								  <span>Preparing your machine</span>
								  
								</a>
						  </li>
							
						
							
							<li class=''>
								<a href="https://docs.pixelfed.org/running-pixelfed/installation/">
								  
								  <span>Generic installation guide</span>
								  
								</a>
						  </li>
							
						
							
							<li class=''>
								<a href="https://docs.pixelfed.org/running-pixelfed/administration/">
								  
								  <span>Administering your website</span>
								  
								</a>
						  </li>
							
						
							
							<li class=''>
								<a href="https://docs.pixelfed.org/running-pixelfed/troubleshooting/">
								  
								  <span>Troubleshooting</span>
								  
								</a>
						  </li>
							
						
							
							<li class=''>
								<a href="https://docs.pixelfed.org/running-pixelfed/optional-features/">
								  
								  <span>Optional features</span>
								  
								</a>
								<ul class="sub-menu">
									
									<li class='active'>
										<a href="https://docs.pixelfed.org/running-pixelfed/optional-features/livestreaming/">
										  
										  <span>Livestreaming (Pixelfed Live)</span>
										  
										</a>
								  </li>
									
									<li class=''>
										<a href="https://docs.pixelfed.org/running-pixelfed/optional-features/ldap-authentication/">
										  
										  <span>LDAP Authentication</span>
										  
										</a>
								  </li>
									
									<li class=''>
										<a href="https://docs.pixelfed.org/running-pixelfed/optional-features/websockets/">
										  
										  <span>Websockets</span>
										  
										</a>
								  </li>
									
								</ul>
						  </li>
							
						
				 </ul>
			</li>
				
			
				
				<li class='section-title'>
				 <a href="https://docs.pixelfed.org/developing-pixelfed/">
					
					<span>Developing for Pixelfed</span>
					
				 </a>
				 <ul class="sub-menu">
						
							
							<li class=''>
								<a href="https://docs.pixelfed.org/developing-pixelfed/intro/">
								  
								  <span>Setting up your environment</span>
								  
								</a>
						  </li>
							
						
				 </ul>
			</li>
				
			
				
				<li class='section-title'>
				 <a href="https://docs.pixelfed.org/technical-documentation/">
					
					<span>Technical documentation</span>
					
				 </a>
				 <ul class="sub-menu">
						
							
							<li class=''>
								<a href="https://docs.pixelfed.org/technical-documentation/activitypub/">
								  
								  <span>ActivityPub</span>
								  
								</a>
						  </li>
							
						
							
							<li class=''>
								<a href="https://docs.pixelfed.org/technical-documentation/config/">
								  
								  <span>Configuration</span>
								  
								</a>
						  </li>
							
						
							
							<li class=''>
								<a href="https://docs.pixelfed.org/technical-documentation/artisan/">
								  
								  <span>Laravel Artisan</span>
								  
								</a>
						  </li>
							
						
							
							<li class=''>
								<a href="https://docs.pixelfed.org/technical-documentation/api-v1/">
								  
								  <span>v1 API</span>
								  
								</a>
						  </li>
							
						
				 </ul>
			</li>
				
			
				
				<li class='section-title'>
				 <a href="https://docs.pixelfed.org/install-guides/">
					
					<span>Distro-specific install guides</span>
					
				 </a>
				 <ul class="sub-menu">
						
							
							<li class=''>
								<a href="https://docs.pixelfed.org/install-guides/arch/">
								  
								  <span>Arch Linux</span>
								  
								</a>
						  </li>
							
						
				 </ul>
			</li>
				
			
	  </ul>
	</div>
</nav>
		
<main>
	<article class="page">
		<header class="page-header section">
			<div class="container">
				<h1 class="page-title">Livestreaming (Pixelfed Live)</h1>
				<p class="page-summary">Pixelfed Live is a mobile based livestreaming feature.</p>
				<p class="lastmod">Last modified <datetime class="date"> Sun Aug 7, 2022 </datetime> - <a href="https://github.com/pixelfed/docs/edit/hugo/content/en/running-pixelfed/optional-features/livestreaming.md">Edit this page on Github</a></p>
				

			</div>
		</header>
		<aside class="toc section">
			<div class="container">
				<p class="toc-title">Page outline</p>
			<nav id="TableOfContents">
  <ol>
    <li><a href="#installing-and-configuring-nginx-rtmp">Installing and Configuring Nginx-RTMP</a></li>
    <li><a href="#configure-livestreaming-settings">Configure Livestreaming Settings</a>
      <ol>
        <li><a href="#basic-configuration">Basic configuration</a></li>
        <li><a href="#advanced-configuration">Advanced configuration</a></li>
      </ol>
    </li>
  </ol>
</nav>
			</div>
		</aside>
		<section class="content section">
			<div class="container">
				<h2 id="installing-and-configuring-nginx-rtmp">
    <span>Installing and Configuring Nginx-RTMP</span>
	 <a class="heading-anchor" href="#installing-and-configuring-nginx-rtmp">
		⛓
    </a>
</h2><p>Begin by running the following commands as a non-root user to update your package listings and install the Nginx module:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt update
</span></span><span style="display:flex;"><span>sudo apt install libnginx-mod-rtmp
</span></span></code></pre></div><p>Installing the module won’t automatically start providing a stream. You’ll need to add a configuration block to your Nginx configuration file that defines where and how the stream will be available.</p>
<p>Using nano or your favorite text editor, open Nginx’s main configuration file, /etc/nginx/nginx.conf, and add this configuration block to the end of the file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo nano /etc/nginx/nginx.conf
</span></span></code></pre></div><p>Make sure you edit lines <strong>16</strong>, <strong>17</strong> with your domain (leave http:// and the path as is), and line <strong>29</strong> with the path to your <code>storage/app/public/live-hls</code> directory</p>
<pre tabindex="0"><code class="language-bash{16,17,29}" data-lang="bash{16,17,29}">rtmp {
    server {
        listen 1935;
        chunk_size 4096;

        application live {
            live on;
            record off;
            interleave on;
            wait_key on;
            
            deny play all;

            push rtmp://127.0.0.1:1935/hls-live flashver=FMLE/3.0;
            
            on_publish http://localhost/api/live/broadcast/publish;
            on_publish_done http://localhost/api/live/broadcast/finish;
        }

        application hls-live {
            live on;
            hls on;
            interleave on;

            deny play all;
            allow publish 127.0.0.1;
            deny publish all;

            hls_path /home/pixelfed/storage/app/public/live-hls;
        
            hls_nested on;
            hls_fragment 5s;
            hls_playlist_length 30s;
            hls_fragment_naming system;
        }
    }
}
</code></pre><p>Save and close the file. If you are using <code>nano</code>, press <kbd>Ctrl+X</kbd>, then when prompted, <kbd>Y</kbd> and <kbd>Enter</kbd>.</p>
<p>This provides the beginning of your RTMP configuration. By default, it listens on port 1935, which means you’ll need to open that port in your firewall. If you configured ufw as part of your initial server setup run the following command.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo ufw allow 1935/tcp
</span></span></code></pre></div><p>Now you can reload Nginx with your changes:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo systemctl reload nginx.service
</span></span></code></pre></div><p>You should now have a working RTMP server. In the next section, we’ll configure the environment settings.</p>
<h2 id="configure-livestreaming-settings">
    <span>Configure Livestreaming Settings</span>
	 <a class="heading-anchor" href="#configure-livestreaming-settings">
		⛓
    </a>
</h2><p>Now you have the RTMP server setup, you can proceed to add the following environment variables to your <code>.env</code> file.</p>
<h3 id="basic-configuration">
    <span>Basic configuration</span>
	 <a class="heading-anchor" href="#basic-configuration">
		⛓
    </a>
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>// Enable Pixelfed Live
</span></span><span style="display:flex;"><span>HLS_LIVE<span style="color:#f92672">=</span>true
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// RTMP server domain
</span></span><span style="display:flex;"><span>HLS_LIVE_HOST<span style="color:#f92672">=</span>pixelfed.social
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// Enable livestreaming from the Pixelfed Live app
</span></span><span style="display:flex;"><span>HLS_LIVE_BROADCAST_SOURCE_APP<span style="color:#f92672">=</span>true
</span></span></code></pre></div><h3 id="advanced-configuration">
    <span>Advanced configuration</span>
	 <a class="heading-anchor" href="#advanced-configuration">
		⛓
    </a>
</h3><p>In addition to the basic configuration variables, the following variables can be used optionally</p>
<h4 id="stream-limits">
    <span>Stream Limits</span>
	 <a class="heading-anchor" href="#stream-limits">
		⛓
    </a>
</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>// Max concurrent live streams
</span></span><span style="display:flex;"><span>HLS_LIVE_BROADCAST_MAX_ACTIVE<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// Max stream duration in minutes
</span></span><span style="display:flex;"><span>HLS_LIVE_BROADCAST_MAX_DURATION<span style="color:#f92672">=</span><span style="color:#ae81ff">60</span>
</span></span></code></pre></div><h4 id="user-limits">
    <span>User Limits</span>
	 <a class="heading-anchor" href="#user-limits">
		⛓
    </a>
</h4><p>Advanced control over who can livestream</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>// Enable broadcast limits
</span></span><span style="display:flex;"><span>HLS_LIVE_BROADCAST_LIMITS<span style="color:#f92672">=</span>true
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// Only allow users with over <span style="color:#ae81ff">1000</span> followers to go live
</span></span><span style="display:flex;"><span>HLS_LIVE_BROADCAST_LIMITS_MIN_FOLLOWERS<span style="color:#f92672">=</span><span style="color:#ae81ff">1000</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// Only allow users with accounts older than <span style="color:#ae81ff">90</span> days to go live
</span></span><span style="display:flex;"><span>HLS_LIVE_BROADCAST_LIMITS_MIN_ACCOUNT_AGE<span style="color:#f92672">=</span><span style="color:#ae81ff">90</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// Only allow admin accounts to go live
</span></span><span style="display:flex;"><span>HLS_LIVE_BROADCAST_LIMITS_ADMINS_ONLY<span style="color:#f92672">=</span>true
</span></span></code></pre></div>
			</div>
		</section>
		<footer class="section">
			<div class="container">
				<nav class="section-nav">
	
	<a class="previous" href="https://docs.pixelfed.org/running-pixelfed/optional-features/websockets/">Previous page:<br/>Websockets</a>
	
	
	<a class="next" href="https://docs.pixelfed.org/running-pixelfed/optional-features/ldap-authentication/">Next page:<br/>LDAP Authentication</a>
	
</nav>
			</div>
		</footer>
	</article>
</main>

		<footer class="site-footer">
	<hr>
	<div class="container">
		
		<a href="#top">back to top</a>
	</div>
</footer>
	</body>
</html>