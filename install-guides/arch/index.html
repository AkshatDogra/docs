<!doctype html><html lang=en xml:lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><link rel=stylesheet href=https://docs.pixelfed.org/scss/theme.screen.min.27dc004a6f3edeca7b5b776e500786de91d6db4506f1fa139dcdfd9ec6141ad5.css integrity="sha256-J9wASm8+3sp7W3duUAeG3pHW20UG8foTnc39nsYUGtU=" media=screen><script type=text/javascript src=https://docs.pixelfed.org/js/script.min.min.6b8f2537cadb577218f145cb8286cb769511f294e34e35d2a68f9c34b03e7295.js integrity="sha256-a48lN8rbV3IY8UXLgobLdpUR8pTjTjXSpo+cNLA+cpU="></script>
<link rel="shortcut icon" href=https://docs.pixelfed.org/images/icon.png sizes=765x765><title>Deploying Pixelfed on Arch Linux | Pixelfed Documentation</title><title itemprop=name>Deploying Pixelfed on Arch Linux | Pixelfed Documentation</title><meta property="og:title" content="Deploying Pixelfed on Arch Linux | Pixelfed Documentation"><meta name=twitter:title content="Deploying Pixelfed on Arch Linux | Pixelfed Documentation"><meta itemprop=name content="Deploying Pixelfed on Arch Linux | Pixelfed Documentation"><meta name=application-name content="Pixelfed Documentation"><meta property="og:site_name" content="Pixelfed Documentation"><meta name=description content="End-to-end guide for installing Pixelfed on Arch Linux"><meta itemprop=description content="End-to-end guide for installing Pixelfed on Arch Linux"><meta property="og:description" content="End-to-end guide for installing Pixelfed on Arch Linux"><meta name=twitter:description content="End-to-end guide for installing Pixelfed on Arch Linux"><base href=https://docs.pixelfed.org/install-guides/arch/><link rel=canonical href=https://docs.pixelfed.org/install-guides/arch/ itemprop=url><meta name=url content="https://docs.pixelfed.org/install-guides/arch/"><meta name=twitter:url content="https://docs.pixelfed.org/install-guides/arch/"><meta property="og:url" content="https://docs.pixelfed.org/install-guides/arch/"><meta itemprop=image content="https://docs.pixelfed.org/images/icon.png"><meta property="og:image" content="https://docs.pixelfed.org/images/icon.png"><meta name=twitter:image content="https://docs.pixelfed.org/images/icon.png"><meta name=twitter:image:src content="https://docs.pixelfed.org/images/icon.png"><meta property="og:updated_time" content="2022-08-06T09:40:16-0500"><meta property="og:type" content="website"><meta name=author content><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","url":"https://docs.pixelfed.org/install-guides/arch/","name":"Deploying Pixelfed on Arch Linux","logo":"https://docs.pixelfed.org/images/icon.png"}</script><meta property="article:publisher" content><meta property="og:article:published_time" content="0001-01-01T00:00:00Z"><meta property="article:published_time" content="0001-01-01T00:00:00Z"><link rel=sitemap type=application/xml title=Sitemap href=https://docs.pixelfed.org/sitemap.xml><meta name=robots content="index,follow"><meta name=googlebot content="index,follow"><link rel=manifest href=https://docs.pixelfed.org/manifest.json><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#ffffff"><meta name=imagemode content="force"><meta name=coverage content="Worldwide"><meta name=distribution content="Global"><meta name=HandheldFriendly content="True"><meta name=msapplication-tap-highlight content="no"><meta name=apple-mobile-web-app-title content="Pixelfed Documentation"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black-translucent"><meta name=apple-touch-fullscreen content="yes"><style>a[href^=http]::after,a[href^="https://"]::after{content:"";width:11px;height:11px;margin-left:4px;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' d='M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5z'/%3E%3Cpath fill-rule='evenodd' d='M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0v-5z'/%3E%3C/svg%3E");background-position:50%;background-repeat:no-repeat;background-size:contain;display:inline-block}a[href^="https\3a\2f\2f docs.pixelfed.org\2f "]::after{display:none!important}a[href^="http://localhost"]::after{display:none!important}</style></head><body><header class=site-header><div class=container><a href=/ class=site-masthead><img class=site-icon height=32 src="https://avatars0.githubusercontent.com/u/38410642?s=200&amp;amp;v=4"><p class=site-title>Pixelfed Documentation</p></a><form id=search-form action=https://docs.pixelfed.org/search/ method=get><label hidden for=search-input>Search site</label>
<input id=search-input type=text name=query placeholder="Type here to search">
<input id=search-submit type=submit value=search></form><nav class=extra-nav><div class=container><ul class=menu><li><a href=https://pixelfed.org><img src="https://avatars0.githubusercontent.com/u/38410642?s=200&v=4" height=24 style=margin-right:.25em>
<span>pixelfed.org</span></a></li><li><a href=https://github.com/pixelfed/pixelfed><svg width="24" height="24" viewBox="0 0 1024 1024" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59C5.87 15.66 6.02 15.42 6.02 15.21 6.02 15.02 6.01 14.39 6.01 13.72 4 14.09 3.48 13.23 3.32 12.78 3.23 12.55 2.84 11.84 2.5 11.65 2.22 11.5 1.82 11.13 2.49 11.12 3.12 11.11 3.57 11.7 3.72 11.94 4.44 13.15 5.59 12.81 6.05 12.6 6.12 12.08 6.33 11.73 6.56 11.53 4.78 11.33 2.92 10.64 2.92 7.58c0-.87.31-1.59.82-2.15C3.66 5.23 3.38 4.41 3.82 3.31c0 0 .67-.21 2.2.82C6.66 3.95 7.34 3.86 8.02 3.86S9.38 3.95 10.02 4.13c1.53-1.04 2.2-.82 2.2-.82C12.66 4.41 12.38 5.23 12.3 5.43 12.81 5.99 13.12 6.7 13.12 7.58c0 3.07-1.87 3.75-3.65 3.95C9.76 11.78 10.01 12.26 10.01 13.01 10.01 14.08 10 14.94 10 15.21 10 15.42 10.15 15.67 10.55 15.59 13.71 14.53 16 11.53 16 8c0-4.42-3.58-8-8-8z" transform="scale(64)" fill="#1b1f23"/></svg><span>Github</span></a></li></ul></div></nav></div></header><nav class="site-nav section"><div class=container><input type=checkbox class=toggle-menu name=toggle id=toggle>
<label class=toggle-menu__label for=toggle><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h7"/></svg>Menu</label><ul class=menu><a id=menu href=#top>Skip menu</a><li class=section-title><a href=https://docs.pixelfed.org/running-pixelfed/><span>Run your own Pixelfed website</span></a><ul class=sub-menu><li><a href=https://docs.pixelfed.org/running-pixelfed/prerequisites/><span>Preparing your machine</span></a></li><li><a href=https://docs.pixelfed.org/running-pixelfed/installation/><span>Generic installation guide</span></a></li><li><a href=https://docs.pixelfed.org/running-pixelfed/administration/><span>Administering your website</span></a></li><li><a href=https://docs.pixelfed.org/running-pixelfed/troubleshooting/><span>Troubleshooting</span></a></li><li><a href=https://docs.pixelfed.org/running-pixelfed/optional-features/><span>Optional features</span></a><ul class=sub-menu><li><a href=https://docs.pixelfed.org/running-pixelfed/optional-features/livestreaming/><span>Livestreaming (Pixelfed Live)</span></a></li><li><a href=https://docs.pixelfed.org/running-pixelfed/optional-features/ldap-authentication/><span>LDAP Authentication</span></a></li><li><a href=https://docs.pixelfed.org/running-pixelfed/optional-features/websockets/><span>Websockets</span></a></li></ul></li></ul></li><li class=section-title><a href=https://docs.pixelfed.org/developing-pixelfed/><span>Developing for Pixelfed</span></a><ul class=sub-menu><li><a href=https://docs.pixelfed.org/developing-pixelfed/intro/><span>Setting up your environment</span></a></li></ul></li><li class=section-title><a href=https://docs.pixelfed.org/technical-documentation/><span>Technical documentation</span></a><ul class=sub-menu><li><a href=https://docs.pixelfed.org/technical-documentation/activitypub/><span>ActivityPub</span></a></li><li><a href=https://docs.pixelfed.org/technical-documentation/config/><span>Configuration</span></a></li><li><a href=https://docs.pixelfed.org/technical-documentation/artisan/><span>Laravel Artisan</span></a></li><li><a href=https://docs.pixelfed.org/technical-documentation/api-v1/><span>v1 API</span></a></li></ul></li><li class='section-title active'><a href=https://docs.pixelfed.org/install-guides/><span>Distro-specific install guides</span></a><ul class=sub-menu><li class=active><a href=https://docs.pixelfed.org/install-guides/arch/><span>Arch Linux</span></a></li></ul></li></ul></div></nav><div class=scroll-margin style=position:relative><div id=top style=scroll-margin-top:var(--header-height)></div></div><main><article class=page><header class="page-header section"><div class=container><h1 class=page-title>Deploying Pixelfed on Arch Linux</h1><p class=page-summary>End-to-end guide for installing Pixelfed on Arch Linux</p><p class=lastmod>Last modified <datetime class=date>Sat Aug 6, 2022</datetime> - <a href=https://github.com/pixelfed/docs/edit/hugo/content/en/install-guides/arch.md>Edit this page on Github</a></p></div></header><aside class="toc section"><div class=container><p class=toc-title>Page outline</p><nav id=TableOfContents><ol><li><a href=#assumptions>Assumptions</a></li><li><a href=#preparing-a-machine>Preparing a machine</a></li><li><a href=#pixelfed-setup>Pixelfed setup</a></li></ol></nav></div></aside><section class="content section"><div class=container><h2 id=assumptions><span>Assumptions</span>
<a class=heading-anchor href=#assumptions>⛓</a></h2><p>These instructions will install Pixelfed with the following:</p><ul><li>Nginx (instead of Apache)</li><li>MariaDB (instead of PostgreSQL)</li><li>PHP-FPM (latest version)</li><li>Redis and PHP-FPM running via sockets instead of TCP (same machine)</li><li><code>pixelfed</code> user for running Horizon queues, <code>http</code> user for running web processes (Arch default)</li><li>Repo cloned at <code>/srv/http/pixelfed</code></li><li>No other sites/services running on this machine</li></ul><h2 id=preparing-a-machine><span>Preparing a machine</span>
<a class=heading-anchor href=#preparing-a-machine>⛓</a></h2><p>You will need a machine running Arch Linux with access to the root account.</p><ol><li>Login as <code>root</code>.</li><li>Create the <code>pixelfed</code> user and group:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>useradd -rU -s /bin/bash -d /srv/http/pixelfed pixelfed
</span></span></code></pre></div><ol start=3><li>Install dependencies:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pacman -S --needed nginx mariadb redis git php-fpm php-intl php-gd php-imagick php-redis composer jpegoptim optipng pngquant imagemagick ffmpeg unzip certbot certbot-nginx
</span></span></code></pre></div><ol start=4><li>Setup database. During <code>mysql_secure_installation</code>, hit Enter to use the default options. Make sure to set a password for the SQL user <code>root</code> (as by default, there is no password).</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mysql_install_db --user<span class=o>=</span>mysql --basedir<span class=o>=</span>/usr --datadir<span class=o>=</span>/var/lib/mysql
</span></span><span class=line><span class=cl>systemctl <span class=nb>enable</span> --now mariadb
</span></span><span class=line><span class=cl>mysql_secure_installation
</span></span><span class=line><span class=cl>mysql -u root -p
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>create</span><span class=w> </span><span class=k>database</span><span class=w> </span><span class=n>pixelfed</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>grant</span><span class=w> </span><span class=k>all</span><span class=w> </span><span class=k>privileges</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>pixelfed</span><span class=p>.</span><span class=o>*</span><span class=w> </span><span class=k>to</span><span class=w> </span><span class=s1>&#39;pixelfed&#39;</span><span class=o>@</span><span class=s1>&#39;localhost&#39;</span><span class=w> </span><span class=n>identified</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=s1>&#39;strong_password&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>flush</span><span class=w> </span><span class=k>privileges</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>exit</span><span class=w>
</span></span></span></code></pre></div><ol start=5><li>Edit <code>/etc/php/php.ini</code> and uncomment the following lines:</li></ol><pre tabindex=0><code>extension=bcmath
extension=exif
extension=gd
extension=iconv
extension=intl
extension=mysqli
extension=pdo_mysql
</code></pre><p>Edit the following lines to your desired upload limits:</p><pre tabindex=0><code>post_max_size = 8M
upload_max_filesize = 2M
max_file_uploads = 20
</code></pre><p>Edit <code>/etc/php/conf.d/imagick.ini</code> and uncomment:</p><pre tabindex=0><code>extension=imagick
</code></pre><p>Edit <code>/etc/php/conf.d/redis.ini</code> and uncomment:</p><pre tabindex=0><code>extension=redis
</code></pre><p>Edit <code>/etc/php/conf.d/igbinary.ini</code> and uncomment:</p><pre tabindex=0><code>extension=igbinary
</code></pre><p>Create a PHP-FPM pool for Pixelfed:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /etc/php/php-fpm.d/
</span></span><span class=line><span class=cl>cp www.conf pixelfed.conf
</span></span><span class=line><span class=cl><span class=nv>$EDITOR</span> pixelfed.conf
</span></span></code></pre></div><p>Make the following changes to the PHP-FPM pool:</p><pre tabindex=0><code>;     use the username of the app-user as the pool name, e.g. pixelfed
[pixelfed]
user = pixelfed
group = pixelfed
;    to use a tcp socket, e.g. if running php-fpm on a different machine than your app:
;    (note that the port 9001 is used, since php-fpm defaults to running on port 9000;)
;    (however, the port can be whatever you want)
; listen = 127.0.0.1:9001;
;    but it&#39;s better to use a socket if you&#39;re running locally on the same machine:
listen = /run/php-fpm/pixelfed.sock
listen.owner = http
listen.group = http
listen.mode = 0660
[...]
</code></pre><ol start=6><li>Edit <code>/etc/redis.conf</code> and edit the following lines:</li></ol><pre tabindex=0><code>port 6379                           # change this to &#34;port 0&#34; to disable network packets
unixsocket /run/redis/redis.sock    # 
unixsocketperm 770                  # give permission to &#34;redis&#34; user and group
</code></pre><ol start=7><li>Edit <code>/etc/nginx/nginx.conf</code>:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-nginx data-lang=nginx><span class=line><span class=cl><span class=k>worker_processes</span> <span class=mi>1</span><span class=p>;</span>    <span class=c1># change to auto, or 1 x your CPU cores, but 1 is enough
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>events</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kn>worker_connections</span> <span class=mi>1024</span><span class=p>;</span>    <span class=c1># 512-1024 is fine for a small site, but you may want to use up to 10k or more, if running in production with many users
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>http</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1># [...]
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kn>client_max_body_size</span> <span class=mi>9m</span><span class=p>;</span> <span class=c1># add this line to configure client upload file size
</span></span></span><span class=line><span class=cl><span class=c1></span>    
</span></span><span class=line><span class=cl>    <span class=kn>gzip</span> <span class=no>on</span><span class=p>;</span>    <span class=c1># uncomment this line
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kn>server</span> <span class=p>{</span>    <span class=c1># delete this entire block
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1># [...]
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kn>include</span> <span class=s>/srv/http/pixelfed/nginx.conf</span><span class=p>;</span>    <span class=c1># we will make this file later
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></div><p>Generate SSL cert:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir /etc/nginx/ssl
</span></span><span class=line><span class=cl>openssl req -x509 -nodes -days <span class=m>365</span> -newkey rsa:2048 -keyout /etc/nginx/ssl/server.key -out /etc/nginx/ssl/server.crt
</span></span></code></pre></div><ol start=8><li>Add users to groups:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>usermod -aG redis pixelfed <span class=c1># give app user access to redis for queues</span>
</span></span></code></pre></div><ol start=9><li>Enable services:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl <span class=nb>enable</span> <span class=o>{</span>nginx,redis,php-fpm<span class=o>}</span>
</span></span><span class=line><span class=cl>systemctl start <span class=o>{</span>redis,php-fpm<span class=o>}</span> <span class=c1># nginx will fail if started now</span>
</span></span></code></pre></div><h2 id=pixelfed-setup><span>Pixelfed setup</span>
<a class=heading-anchor href=#pixelfed-setup>⛓</a></h2><ol><li>Clone the repo:</li></ol><pre tabindex=0><code>cd /srv/http
git clone -b dev https://github.com/pixelfed/pixelfed.git pixelfed
</code></pre><ol start=2><li>Setup environment variables and nginx:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> pixelfed
</span></span><span class=line><span class=cl>cp contrib/nginx.conf nginx.conf
</span></span><span class=line><span class=cl><span class=nv>$EDITOR</span> nginx.conf
</span></span><span class=line><span class=cl><span class=c1>## in particular, set:</span>
</span></span><span class=line><span class=cl><span class=c1>### - the correct domain name</span>
</span></span><span class=line><span class=cl><span class=c1>### - client_max_body_size to your desired upload limit</span>
</span></span><span class=line><span class=cl><span class=c1>### - fastcgi_pass correct path (e.g. unix:/run/php-fpm/pixelfed.sock;)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>cp .env.example .env
</span></span><span class=line><span class=cl><span class=nv>$EDITOR</span> .env
</span></span><span class=line><span class=cl><span class=c1>## in particular, set:</span>
</span></span><span class=line><span class=cl><span class=c1>### DB_SOCKET = /run/mysqld/mysqld.sock</span>
</span></span><span class=line><span class=cl><span class=c1>###</span>
</span></span><span class=line><span class=cl><span class=c1>### REDIS_HOST = /run/redis/redis.sock</span>
</span></span><span class=line><span class=cl><span class=c1>### REDIS_PORT = null</span>
</span></span><span class=line><span class=cl><span class=c1>###</span>
</span></span><span class=line><span class=cl><span class=c1>### IMAGE_DRIVER = imagick</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>$EDITOR</span> config/database.php
</span></span><span class=line><span class=cl><span class=c1>## change predis to phpredis</span>
</span></span></code></pre></div><ol start=3><li>Create the following file at <code>/etc/systemd/system/pixelfed.service</code>:</li></ol><pre tabindex=0><code>[Unit]
Description=Pixelfed task queueing via Laravel Horizon
After=network.target
Requires=mariadb
Requires=php-fpm
Requires=redis
Requires=nginx

[Service]
Type=simple
ExecStart=/usr/bin/php /srv/http/pixelfed/artisan horizon
User=pixelfed
Restart=on-failure

[Install]
WantedBy=multi-user.target
</code></pre><ol start=4><li>Set permissions:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chown -R pixelfed:pixelfed .
</span></span><span class=line><span class=cl>find . -type d -exec chmod <span class=m>755</span> <span class=o>{}</span> <span class=se>\;</span>
</span></span><span class=line><span class=cl>find . -type f -exec chmod <span class=m>644</span> <span class=o>{}</span> <span class=se>\;</span>
</span></span></code></pre></div><ol start=5><li>Switch to the <code>pixelfed</code> user:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>su - pixelfed
</span></span></code></pre></div><ol start=6><li>Deploy:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>$EDITOR</span> composer.json
</span></span><span class=line><span class=cl><span class=c1>## change require php to &gt;= instead of ^</span>
</span></span><span class=line><span class=cl><span class=c1>## remove beyondcode/laravel-self-diagnosis</span>
</span></span><span class=line><span class=cl><span class=c1>## change league/iso3166 to &gt;= instead of ^</span>
</span></span><span class=line><span class=cl><span class=c1>## change spatie/laravel-image-optimizer to &gt;= instead of ^</span>
</span></span><span class=line><span class=cl><span class=c1>## change laravel/ui to &gt;= instead of ^</span>
</span></span><span class=line><span class=cl>composer update
</span></span><span class=line><span class=cl>composer install --no-ansi --no-interaction --no-progress --no-scripts --optimize-autoloader
</span></span><span class=line><span class=cl>php artisan key:generate
</span></span><span class=line><span class=cl>php artisan storage:link
</span></span><span class=line><span class=cl>php artisan horizon:install
</span></span><span class=line><span class=cl>php artisan horizon:publish
</span></span><span class=line><span class=cl>php artisan migrate --force
</span></span></code></pre></div><p>Optionally, use cache [NOTE: if you run these commands, you will need to run them every time you change .env or update Pixelfed]:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>php artisan config:cache
</span></span><span class=line><span class=cl>php artisan route:cache
</span></span><span class=line><span class=cl>php artisan view:cache
</span></span></code></pre></div><p>Import Places data:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>php artisan import:cities
</span></span></code></pre></div><ol start=7><li>Start web server and Horizon task queue:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>exit</span>
</span></span><span class=line><span class=cl>systemctl <span class=nb>enable</span> --now <span class=o>{</span>nginx,pixelfed<span class=o>}</span>
</span></span></code></pre></div></div></section><footer class=section><div class=container><nav class=section-nav></nav></div></footer></article></main><footer class=site-footer><hr><div class=container><a href=#top>back to top</a></div></footer><script src=https://unpkg.com/lunr/lunr.js></script>
<script type=text/javascript src=https://docs.pixelfed.org/js/search.min.min.2a154854f469aeb7a58abc0acf08e4219056bff7fc63c967931f0d6b8b611058.js integrity="sha256-KhVIVPRprrelirwKzwjkIZBWv/f8Y8lnkx8Na4thEFg="></script></body></html>